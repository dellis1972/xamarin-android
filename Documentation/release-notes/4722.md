#### Visual Studio Crashes when changing an AndroidResource file.

- [Developer Community 1038779](https://developercommunity.visualstudio.com/content/problem/1038779/visual-studio-crash-down.html):
- [GitHub 4734](https://github.com/xamarin/xamarin-android/issues/4734):

In 16.7 Preview 1 we encountered a problem were Visual Studio world
crash uneexpectedly. Further investigation lead to an Unhandled `IOException`
in the new `aapt2` deamon code causing the problem. This only seems to
happen when `AndroidUseManagedDesignTimeResourceGenerator` is set to
`False` in the csproj. As to why it happens that is still unknown. The
problem occurs when we are trying to set the `InputEncoding` of the `Console`.
This is to make sure `aapt2` can handle non-ASCII characters in paths. However
when running in a design time build the `IOException` of `invalid handle` is thrown.
This does not occur during a normal build.

The workarond is to remove the `AndroidUseManagedDesignTimeResourceGenerator` from
the csproj. The fix is to catch the `IOException` and allow `aapt2` to run. This will
stop Visual Studio from crashing.

### Known issues

  If the `IOException` is thrown and caught, `aapt2` will not be able to accept non-ASCII
  characters for paths as its input. You might see `aapt2` build failures if you have
  non-ASCII characters in your paths.